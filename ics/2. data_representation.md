# 数据的机器级表示与处理

## 定点数表示

+ 主要使用补码表示，略
---
## 浮点数表示
### IEEE 754标准
![[flpt_represent.jpg]]

![[flpt_interpret.jpg]]
+ s为符号位，ｅ为阶码，ｆ为尾数部分，则规格化浮点数为$(-1)^{s}\ 2^{\ e\ -\ bias}(1.f)$，$bias = 2^{n-1}-1$, ｎ为阶码位数
+ 全０阶码，全０尾数：+0/-0
+ 全０阶码，非０尾数：非规格化浮点数
+ 全１阶码，全０尾数：$+\infty\ /-\infty$
+ 全１阶码，非０尾数：NaN(非数, Not a Number)
+ 阶码非全０且非全１：规格化非０数
### C语言

+ int 转为 float, 有效数字可能被舍去
+ float/double 转为 int, 小数点后部分被截断，向０方向舍入
+ int/float 转换 为double，double有效位更多，能保留精确值
+ double 转换为 float，float 表示范围小，可能溢出，且float 有效位少，可能被舍入
---
## 数据宽度与存储

## 字长

+ 32位机字长为32位，64位机字长为64位
+ 字长与字的宽度(单字，双字的宽度)无关
### C语言中数据类型宽度
![[data_width.jpg]]
### 存储顺序

+ 小端：最低有效字节(LSB)存放在低地址
+ 大端：最高有效字节(MSB)存放在低地址
---
## 数据基本运算

## 移位运算：

+ 逻辑右移，最高位总是移入０；算术右移，最高位移入符号位
+ 算术右移时，`x >> k`总是表示`x / 2^{k}`的floor，无论ｘ的正负，若要在ｘ为负时右移向０舍入，则使用`(x + (1 << (k-1))) >> k`
### 位扩展与截断：

+ 有符号数的扩展总是符号扩展，无符号数的扩展总是０扩展
+ 截断则直接取低n位
### 整数加减法：

+ 无符号数加法：
	+ $x+y\ \ \ (x + y < 2^{n})$ 正常
	+ $x +y -2^{n}\ \ \ (x+y\geq 2^{n})$ 溢出
+ 无符号数减法：
	+ $x - y\ \ \ (x-y > 0)$ 正常
	+ $x - y + 2^{n}\ \ \ (x-y<0)$ 结果为负
+ 带符号数加法：
	+ $x + y - 2^{n-1}\ \ \ (x+y\geq 2^{n-1})$ 正溢出
	+ $x + y\ \ \ (-2^{n-1}<x+y<2^{n-1})$ 正常
	+ $x + y + 2^{n-1}\ \ \ (x+y<-2^{n-1})$ 负溢出, 注意可以等于$-2^{n-1}$
+ 带符号数减法：
	将-y改为+$[-y]_{comp}$ ，套用加法结论即可
### 浮点数加减法：

+ 对阶：小阶向大阶看齐，注意要将隐含的一位 ***1*** 右移到小数部分，低位移出的位不要丢掉，保留并参加尾数部分运算
+ 尾数加减：尾数部分保留的附加位也要参加运算
+ 尾数规格化：对加减后得到的结果重新进行规格化，并修改阶码位
+ 舍入尾数：多种方法，最简单为朝０舍入，丢弃多出的位
